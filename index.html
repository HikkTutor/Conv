<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Конвертер координат Minecraft</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --overworld-primary: #29b6f6;
            --overworld-secondary: #0288d1;
            --overworld-dark: #0d1b2a;
            --nether-primary: #f44336;
            --nether-secondary: #c62828;
            --bg-dark: #0f172a;
            --bg-darker: #0a1120;
            --text-light: #e0f7fa;
            --text-muted: #94a3b8;
            --success: #4ade80;
            --warning: #FFC107;
            --error: #ff5252;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --title-gradient: linear-gradient(45deg, #29b6f6, #9c27b0, #f44336);
        }
        
        body {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            touch-action: pan-y;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overscroll-behavior: contain;
        }
        
        .allow-select,
        .coords-text,
        .formula-info,
        input {
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: var(--bg-darker);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(41, 182, 246, 0.05) 0%, transparent 25%),
                radial-gradient(circle at 90% 80%, rgba(244, 67, 54, 0.05) 0%, transparent 25%),
                linear-gradient(to bottom, var(--bg-darker), var(--bg-dark));
            color: var(--text-light);
            font-family: 'Montserrat', sans-serif;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-attachment: fixed;
            position: relative;
        }
        
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(41, 182, 246, 0.03) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(244, 67, 54, 0.03) 0%, transparent 25%);
            z-index: -1;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        .header {
            text-align: center;
            margin: 10px 0 25px;
            width: 100%;
            position: relative;
            z-index: 10;
            animation: fadeInDown 0.8s ease;
        }
        
        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(2rem, 7vw, 3.2rem);
            margin-bottom: 8px;
            background: var(--title-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 1.5px;
            position: relative;
            padding-bottom: 12px;
            font-weight: 900;
            text-align: center;
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(156, 39, 176, 0.3);
        }
        
        h1::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 350px;
            height: 4px;
            background: var(--title-gradient);
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.5);
        }
        
        .subtitle {
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            max-width: 700px;
            margin: 15px auto 0;
            line-height: 1.4;
            color: var(--text-light);
            text-align: center;
            font-weight: 500;
            padding: 0 10px;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
            text-shadow: 0 0 5px rgba(41, 182, 246, 0.5);
        }
        
        .worlds-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
            font-size: clamp(1.1rem, 3.5vw, 1.3rem);
            font-weight: 700;
            text-transform: uppercase;
            font-family: 'Orbitron', sans-serif;
            flex-wrap: wrap;
        }
        
        .world-overworld {
            color: var(--overworld-primary);
            text-shadow: 0 0 8px rgba(41, 182, 246, 0.5);
        }
        
        .world-nether {
            color: var(--nether-primary);
            text-shadow: 0 0 8px rgba(244, 67, 54, 0.5);
        }
        
        .info-box {
            background: rgba(15, 23, 42, 0.6);
            border-radius: 10px;
            padding: 10px 12px;
            margin: 10px auto 15px;
            border-left: 3px solid var(--overworld-primary);
            font-size: clamp(0.8rem, 3vw, 0.9rem);
            max-width: 800px;
            color: var(--text-muted);
            animation: slideIn 0.6s ease;
            text-align: center;
        }
        
        .mode-switcher {
            display: flex;
            justify-content: center;
            margin: 0 0 15px;
            gap: 10px;
            animation: fadeIn 1s ease;
            width: 100%;
            max-width: 600px;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            padding: 12px 18px;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-size: clamp(0.9rem, 3.5vw, 1.1rem);
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
            min-width: 48%;
            justify-content: center;
            text-align: center;
        }
        
        .mode-btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: translateX(-100%);
            transition: 0.6s;
        }
        
        .mode-btn:hover::before {
            transform: translateX(100%);
        }
        
        .mode-btn.active {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .mode-btn.overworld.active {
            background: rgba(79, 195, 247, 0.3);
            border-color: var(--overworld-primary);
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.3);
        }
        
        .mode-btn.nether.active {
            background: rgba(244, 67, 54, 0.3);
            border-color: var(--nether-primary);
            box-shadow: 0 0 15px rgba(244, 67, 54, 0.3);
        }
        
        .mode-btn i {
            font-size: clamp(1rem, 4vw, 1.2rem);
            transition: transform 0.3s ease;
        }
        
        .converter-container {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 16px;
            padding: 20px;
            width: 100%;
            max-width: 600px;
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(8px);
            position: relative;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.05);
            animation: scaleIn 0.8s ease;
            margin-bottom: 20px;
        }
        
        .converter-container.overworld {
            border-top: 4px solid var(--overworld-primary);
        }
        
        .converter-container.nether {
            border-top: 4px solid var(--nether-primary);
        }
        
        .box-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
            position: relative;
        }
        
        .icon {
            font-size: clamp(1.5rem, 5vw, 2.2rem);
            width: clamp(50px, 12vw, 70px);
            height: clamp(50px, 12vw, 70px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--overworld-dark), rgba(15, 23, 42, 0.8));
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .overworld .icon {
            box-shadow: 
                0 0 0 2px rgba(79, 195, 247, 0.3),
                0 0 15px rgba(79, 195, 247, 0.2);
        }
        
        .nether .icon {
            box-shadow: 
                0 0 0 2px rgba(244, 67, 54, 0.3),
                0 0 15px rgba(244, 67, 54, 0.2);
        }
        
        .box-title {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.3rem, 4.5vw, 1.8rem);
            font-weight: 700;
            color: var(--text-light);
            background: none;
            -webkit-background-clip: unset;
            -webkit-text-fill-color: unset;
        }
        
        .formula-toggle {
            position: absolute;
            top: 5px;
            right: 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: var(--text-light);
            width: clamp(28px, 7vw, 36px);
            height: clamp(28px, 7vw, 36px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: clamp(0.9rem, 3.5vw, 1.1rem);
        }
        
        .formula-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 12px;
            font-size: clamp(0.95rem, 3.5vw, 1.1rem);
            color: var(--text-muted);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .input-row {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .coord-input {
            flex: 1;
            position: relative;
            min-width: calc(33.333% - 12px);
        }
        
        .coord-input input {
            width: 100%;
            padding: 14px 16px;
            border-radius: 12px;
            background: rgba(15, 23, 42, 0.7);
            color: var(--text-light);
            font-size: clamp(0.95rem, 3.5vw, 1.1rem);
            font-weight: 500;
            font-family: 'Montserrat', sans-serif;
            transition: var(--transition);
            box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(79, 195, 247, 0.15);
        }
        
        .overworld .coord-input input:focus {
            outline: none;
            border-color: var(--overworld-primary);
            box-shadow: 
                0 0 12px rgba(79, 195, 247, 0.3),
                inset 0 0 8px rgba(0, 0, 0, 0.3);
        }
        
        .nether .coord-input input {
            border-color: rgba(244, 67, 54, 0.15);
        }
        
        .nether .coord-input input:focus {
            border-color: var(--nether-primary);
            box-shadow: 
                0 0 12px rgba(244, 67, 54, 0.3),
                inset 0 0 8px rgba(0, 0, 0, 0.3);
        }
        
        .coord-input .error {
            display: block;
            margin-top: 6px;
            font-size: clamp(0.75rem, 2.8vw, 0.85rem);
            color: var(--error);
            padding-left: 5px;
            min-height: 18px;
        }
        
        .result-container {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 14px;
            padding: 18px;
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
            overflow: hidden;
        }
        
        .result-title {
            font-size: clamp(1.05rem, 4vw, 1.25rem);
            margin-bottom: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .overworld .result-title {
            color: var(--nether-primary);
        }
        
        .nether .result-title {
            color: var(--overworld-primary);
        }
        
        .coordinates-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .coordinates {
            font-size: clamp(1.15rem, 4vw, 1.35rem);
            font-family: 'Orbitron', sans-serif;
            color: var(--text-light);
            padding: 14px;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .coords-text {
            flex: 1;
            min-width: 200px;
            word-break: break-word;
            font-size: clamp(1.05rem, 3.5vw, 1.25rem);
            padding: 10px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.2);
            line-height: 1.4;
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: flex-end;
            width: 100%;
            margin-top: 10px;
        }
        
        .action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: var(--text-light);
            padding: 12px 18px;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-size: clamp(0.9rem, 3vw, 1rem);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            min-width: 48%;
            justify-content: center;
            white-space: nowrap;
        }
        
        .action-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .action-btn:focus {
            outline: 2px solid var(--overworld-primary);
            outline-offset: 2px;
        }
        
        .action-btn i {
            font-size: clamp(0.9rem, 3vw, 1rem);
        }
        
        .copy-btn {
            background: rgba(79, 195, 247, 0.2);
            border-color: rgba(79, 195, 247, 0.3);
        }
        
        .overworld .copy-btn {
            background: rgba(244, 67, 54, 0.2);
            border-color: rgba(244, 67, 54, 0.3);
        }
        
        .transfer-btn {
            background: rgba(255, 193, 7, 0.2);
            border-color: rgba(255, 193, 7, 0.3);
        }
        
        .formula-info {
            margin-top: 20px;
            padding: 15px;
            background: rgba(15, 23, 42, 0.8);
            border-radius: 12px;
            font-size: clamp(0.9rem, 3.2vw, 1.05rem);
            line-height: 1.5;
            color: var(--text-muted);
            position: relative;
            overflow: hidden;
            max-height: 0;
            opacity: 0;
            transition: var(--transition);
        }
        
        .overworld .formula-info {
            border-left: 3px solid var(--nether-primary);
        }
        
        .nether .formula-info {
            border-left: 3px solid var(--overworld-primary);
        }
        
        .formula-info.active {
            max-height: 200px;
            opacity: 1;
        }
        
        .formula-info strong {
            color: var(--text-light);
            font-weight: 600;
        }
        
        .footer {
            text-align: center;
            padding: 20px 10px;
            color: var(--text-muted);
            font-size: clamp(0.8rem, 2.8vw, 0.9rem);
            max-width: 800px;
            margin-top: auto;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            width: 100%;
        }
        
        .footer a {
            color: var(--overworld-primary);
            text-decoration: none;
            transition: color 0.3s;
            font-weight: 500;
        }
        
        .footer a:hover {
            color: var(--overworld-secondary);
            text-decoration: underline;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 10px;
            background: var(--overworld-dark);
            color: var(--text-light);
            font-weight: 500;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 90%;
            font-size: clamp(0.9rem, 3.2vw, 1rem);
            text-align: center;
        }
        
        .notification.success {
            border-left: 3px solid var(--success);
        }
        
        .notification.warning {
            border-left: 3px solid var(--warning);
        }
        
        .notification.error {
            border-left: 3px solid var(--error);
        }
        
        .notification.success i {
            color: var(--success);
        }
        
        .notification.warning i {
            color: var(--warning);
        }
        
        .notification.error i {
            color: var(--error);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .swipe-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-bottom: 15px;
            overflow: hidden;
        }
        
        .swipe-area {
            width: 100%;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 12px;
            color: var(--text-muted);
            font-size: clamp(0.85rem, 3vw, 1rem);
            border: 1px dashed rgba(255, 255, 255, 0.1);
            animation: pulseHint 2s infinite;
            position: relative;
        }
        
        .swipe-area .arrows {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 0 10px;
        }
        
        .swipe-area .arrows i {
            font-size: 1.2rem;
            opacity: 0.7;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInDown {
            from { 
                opacity: 0; 
                transform: translateY(-20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes scaleIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        @keyframes pulseHint {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        @media (hover: none) and (pointer: coarse) {
            .action-btn:active,
            .mode-btn:active {
                transform: translateY(0) !important;
                background: rgba(255, 255, 255, 0.15) !important;
                opacity: 0.9;
            }
            
            .action-btn:active::after,
            .mode-btn:active::after {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 255, 255, 0.1);
                border-radius: inherit;
                animation: buttonRipple 0.4s linear;
            }
            
            .formula-toggle:active {
                transform: scale(0.95) rotate(90deg);
            }
            
            @keyframes buttonRipple {
                0% {
                    transform: scale(0.8);
                    opacity: 0.6;
                }
                100% {
                    transform: scale(1.5);
                    opacity: 0;
                }
            }
        }
        
        @media (max-width: 768px) {
            .input-row {
                flex-direction: column;
                gap: 12px;
            }
            
            .coord-input {
                min-width: 100%;
            width: 100%;
            max-width: 100%;
            flex: none;
            margin-bottom: 5px;
            margin-right: 0;
            margin-left: 0;
            padding: 0;
        }
            
            .coord-input input {
                width: 100%;
            }
            
            .mode-btn {
                min-width: 100%;
            }
            
            .action-btn {
                min-width: 100%;
                padding: 10px 15px;
            }
            
            .coordinates {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 8px;
            }
            
            .coords-text {
                min-width: 100%;
                width: 100%;
            }
            
            .swipe-container {
                display: block;
            }
            
            .notification {
                top: 10px;
                left: 50%;
                right: auto;
                transform: translateX(-50%) translateX(150%);
                max-width: 90%;
                width: auto;
                min-width: 80%;
                text-align: center;
            }
            
            .notification.show {
                transform: translateX(-50%) translateX(0);
            }
        }
        
        @media (min-width: 769px) {
            .converter-container {
                transition: transform 0.3s ease, opacity 0.3s ease;
            }
            
            .converter-container.hidden {
                opacity: 0;
                transform: scale(0.95);
                pointer-events: none;
                position: absolute;
                top: -9999px;
                left: -9999px;
                width: 0;
                height: 0;
                overflow: hidden;
                z-index: -1;
            }
            
            .swipe-container {
                display: none;
            }
            
            .container {
                min-height: 700px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 5px;
            }
            
            body {
                padding: 10px;
            }
            
            .converter-container {
                padding: 15px;
            }
            
            .coordinates {
                padding: 12px;
            }
            
            .coords-text {
                padding: 8px;
                font-size: 1rem;
            }
            
            .result-title {
                font-size: 1.1rem;
            }
            
            .box-header {
                margin-bottom: 15px;
            }
            
            .box-title {
                font-size: 1.3rem;
            }
            
            .input-group label {
                font-size: 0.95rem;
            }
            
            .coord-input input {
                padding: 12px 14px;
                font-size: 1rem;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>КОНВЕРТЕР КООРДИНАТ</h1>
            <p class="subtitle">MINECRAFT</p>
            <div class="worlds-container">
                <span class="world-overworld">Обычный мир</span>
                <span>↔</span>
                <span class="world-nether">Незер</span>
            </div>
        </div>

        <div class="info-box">
            <i class="fas fa-info-circle"></i> Координаты ограничены: от -30,000,000 до 30,000,000
        </div>

        <div class="mode-switcher">
            <button class="mode-btn overworld active" id="mode-overworld" tabindex="0">
                <i class="fas fa-tree"></i> Обычный → Незер
            </button>
            <button class="mode-btn nether" id="mode-nether" tabindex="0">
                <i class="fas fa-fire"></i> Незер → Обычный
            </button>
        </div>
        
        <div class="swipe-container">
            <div class="swipe-area" id="swipe-area">
                <div class="arrows">
                    <i class="fas fa-arrow-left"></i>
                    <span>Свайп для переключения</span>
                    <i class="fas fa-arrow-right"></i>
                </div>
            </div>
        </div>

        <div class="converter-container overworld" id="converter">
            <div class="box-header">
                <div class="icon">
                    <i class="fas fa-tree"></i>
                </div>
                <h2 class="box-title">Обычный → Незер</h2>
                <div class="formula-toggle" onclick="toggleFormula()" tabindex="0">
                    <i class="fas fa-question"></i>
                </div>
            </div>
            
            <div class="input-group">
                <label><i class="fas fa-map-marker-alt"></i> Введите координаты:</label>
                <div class="input-row">
                    <div class="coord-input">
                        <input type="text" id="input-x" placeholder="X" inputmode="decimal" tabindex="1">
                        <div class="error" id="x-error"></div>
                    </div>
                    <div class="coord-input">
                        <input type="text" id="input-y" placeholder="Y" inputmode="decimal" tabindex="2">
                        <div class="error" id="y-error"></div>
                    </div>
                    <div class="coord-input">
                        <input type="text" id="input-z" placeholder="Z" inputmode="decimal" tabindex="3">
                        <div class="error" id="z-error"></div>
                    </div>
                </div>
            </div>
            
            <div class="result-container">
                <div class="result-title">
                    <i class="fas fa-fire"></i> Координаты в Незере:
                </div>
                <div class="coordinates-container">
                    <div class="coordinates">
                        <div class="coords-text allow-select" id="result-display">Введите координаты</div>
                        <div class="action-buttons">
                            <button class="action-btn transfer-btn" onclick="transferCoords()" tabindex="4" id="transfer-btn">
                                <i class="fas fa-exchange-alt"></i> Перенести
                            </button>
                            <button class="action-btn copy-btn" onclick="copyCoords()" tabindex="5" id="copy-btn">
                                <i class="fas fa-copy"></i> Копировать
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="formula-info allow-select" id="formula-info">
                <strong>Формула:</strong> Координаты Незера = Обычные / 8<br>
                X<sub>н</sub> = X<sub>о</sub> / 8, Z<sub>н</sub> = Z<sub>о</sub> / 8, Y<sub>н</sub> = Y<sub>о</sub>
            </div>
        </div>
        
        <div class="footer">
            <p>DPT</Minecraf> 2025</p>
            <p>Создано с <i class="fas fa-heart" style="color: var(--nether-primary);"></i></p>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Координаты скопированы!</span>
    </div>

    <script>
        const MAX_OVERWORLD = 30000000;
        const MIN_OVERWORLD = -30000000;
        const MAX_NETHER = MAX_OVERWORLD / 8;
        const MIN_NETHER = MIN_OVERWORLD / 8;
        const MIN_Y = -64;
        const MAX_Y = 320;
        
        let currentMode = 'overworld';
        let demoCleared = false;
        let touchStartX = 0;
        let touchEndX = 0;
        let swipeInProgress = false;
        
        function clearDemoValue() {
            if (!demoCleared) {
                document.getElementById('input-x').value = '';
                document.getElementById('input-y').value = '';
                document.getElementById('input-z').value = '';
                demoCleared = true;
                updateResults();
            }
        }
        
        function validateNumberInput(input) {
            const cursorPosition = input.selectionStart;
            let value = input.value;
            
            value = value.replace(/,/g, '.');
            
            if (value.includes('--')) {
                value = value.replace(/-/g, '');
            }
            
            let minusCount = (value.match(/-/g) || []).length;
            if (minusCount > 1) {
                value = value.replace(/-/g, '');
                minusCount = 0;
            }
            
            if (minusCount === 1) {
                if (!value.startsWith('-')) {
                    value = value.replace(/-/g, '');
                    minusCount = 0;
                }
            }
            
            value = value.replace(/[^\d.-]/g, '');
            
            if (value.includes('.')) {
                const parts = value.split('.');
                if (parts.length > 2) {
                    value = parts[0] + '.' + parts.slice(1).join('');
                }
            }
            
            if (value.startsWith('.')) {
                value = '0' + value;
            }
            
            if (value.startsWith('-.')) {
                value = '-0' + value.substring(2);
            }
            
            input.value = value;
            input.setSelectionRange(cursorPosition, cursorPosition);
            updateResults();
        }
        
        function toggleSign(input) {
            let value = input.value;
            
            if (value.startsWith('-')) {
                input.value = value.substring(1);
            } else {
                input.value = '-' + value;
            }
            
            updateResults();
        }
        
        function updateResults() {
            if (currentMode === 'overworld') {
                const x = validateInput('input-x', MIN_OVERWORLD, MAX_OVERWORLD, 'x-error');
                const y = validateInput('input-y', MIN_Y, MAX_Y, 'y-error');
                const z = validateInput('input-z', MIN_OVERWORLD, MAX_OVERWORLD, 'z-error');
                
                if (x === 0 && y === 0 && z === 0 && !demoCleared) {
                    document.getElementById('result-display').textContent = "Введите координаты";
                    return;
                }
                
                const netherX = (x / 8).toFixed(2);
                const netherY = y;
                const netherZ = (z / 8).toFixed(2);
                
                document.getElementById('result-display').textContent = 
                    `X: ${netherX}, Y: ${netherY}, Z: ${netherZ}`;
            } else {
                const x = validateInput('input-x', MIN_NETHER, MAX_NETHER, 'x-error');
                const y = validateInput('input-y', MIN_Y, MAX_Y, 'y-error');
                const z = validateInput('input-z', MIN_NETHER, MAX_NETHER, 'z-error');
                
                if (x === 0 && y === 0 && z === 0 && !demoCleared) {
                    document.getElementById('result-display').textContent = "Введите координаты";
                    return;
                }
                
                const overworldX = (x * 8).toFixed(2);
                const overworldY = y;
                const overworldZ = (z * 8).toFixed(2);
                
                document.getElementById('result-display').textContent = 
                    `X: ${overworldX}, Y: ${overworldY}, Z: ${overworldZ}`;
            }
        }
        
        function validateInput(id, min, max, errorId) {
            const input = document.getElementById(id);
            const errorElement = document.getElementById(errorId);
            
            let valueStr = input.value;
            if (valueStr === '' || valueStr === '-') {
                errorElement.textContent = '';
                return 0;
            }
            
            let value = parseFloat(valueStr) || 0;
            
            errorElement.textContent = '';
            
            if (value < min || value > max) {
                value = Math.max(min, Math.min(max, value));
                input.value = value.toString();
                errorElement.textContent = `Диапазон: ${min} - ${max}`;
            }
            
            return value;
        }
        
        function copyCoords() {
            const text = document.getElementById('result-display').textContent;
            
            if (text === "Введите координаты") {
                showNotification("Введите координаты для копирования", 'warning');
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Координаты скопированы в буфер обмена!', 'success');
            });
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            const icon = notification.querySelector('i');
            
            notificationText.textContent = message;
            notification.className = 'notification';
            
            if (type === 'success') {
                notification.classList.add('success');
                icon.className = 'fas fa-check-circle';
            } else if (type === 'warning') {
                notification.classList.add('warning');
                icon.className = 'fas fa-exclamation-circle';
            } else if (type === 'error') {
                notification.classList.add('error');
                icon.className = 'fas fa-times-circle';
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 2500);
        }
        
        function toggleFormula() {
            const formula = document.getElementById('formula-info');
            formula.classList.toggle('active');
        }
        
        function transferCoords() {
            const x = document.getElementById('input-x').value;
            const y = document.getElementById('input-y').value;
            const z = document.getElementById('input-z').value;
            
            if (!x && !y && !z) {
                showNotification("Введите координаты для переноса", 'warning');
                return;
            }
            
            if (currentMode === 'overworld') {
                const numX = parseFloat(x) || 0;
                const numZ = parseFloat(z) || 0;
                
                if (numX < MIN_NETHER || numX > MAX_NETHER || numZ < MIN_NETHER || numZ > MAX_NETHER) {
                    showNotification("Координаты слишком большие для Незера!", 'error');
                    return;
                }
                
                switchMode('nether');
                document.getElementById('input-x').value = x;
                document.getElementById('input-y').value = y;
                document.getElementById('input-z').value = z;
                showNotification('Координаты перенесены в Незер!', 'success');
            } else {
                const numX = parseFloat(x) || 0;
                const numZ = parseFloat(z) || 0;
                
                if (numX < MIN_OVERWORLD || numX > MAX_OVERWORLD || numZ < MIN_OVERWORLD || numZ > MAX_OVERWORLD) {
                    showNotification("Координаты слишком большие для Обычного мира!", 'error');
                    return;
                }
                
                switchMode('overworld');
                document.getElementById('input-x').value = x;
                document.getElementById('input-y').value = y;
                document.getElementById('input-z').value = z;
                showNotification('Координаты перенесены в Обычный мир!', 'success');
            }
            
            updateResults();
        }
        
        function switchMode(mode) {
            if (currentMode === mode) return;
            
            const converter = document.getElementById('converter');
            const overworldBtn = document.getElementById('mode-overworld');
            const netherBtn = document.getElementById('mode-nether');
            
            overworldBtn.classList.toggle('active', mode === 'overworld');
            netherBtn.classList.toggle('active', mode === 'nether');
            
            if (window.innerWidth > 768) {
                converter.classList.add('hidden');
                
                setTimeout(() => {
                    updateConverterUI(mode);
                    
                    setTimeout(() => {
                        converter.classList.remove('hidden');
                    }, 50);
                }, 300);
            } 
            else {
                updateConverterUI(mode);
            }
            
            currentMode = mode;
        }
        
        function updateConverterUI(mode) {
            const converter = document.getElementById('converter');
            converter.className = 'converter-container ' + mode;
            converter.querySelector('.icon').innerHTML = 
                mode === 'overworld' ? '<i class="fas fa-tree"></i>' : '<i class="fas fa-fire"></i>';
                
            converter.querySelector('.box-title').textContent = 
                mode === 'overworld' ? 'Обычный → Незер' : 'Незер → Обычный';
                
            converter.querySelector('.result-title i').className = 
                mode === 'overworld' ? 'fas fa-fire' : 'fas fa-tree';
                
            converter.querySelector('.result-title').innerHTML = 
                mode === 'overworld' 
                    ? '<i class="fas fa-fire"></i> Координаты в Незере:' 
                    : '<i class="fas fa-tree"></i> Координаты в Обычном мире:';
            
            const formula = document.getElementById('formula-info');
            formula.innerHTML = mode === 'overworld' 
                ? '<strong>Формула:</strong> Координаты Незера = Обычные / 8<br>X<sub>н</sub> = X<sub>о</sub> / 8, Z<sub>н</sub> = Z<sub>о</sub> / 8, Y<sub>н</sub> = Y<sub>о</sub>'
                : '<strong>Формула:</strong> Координаты Обычного мира = Незер × 8<br>X<sub>о</sub> = X<sub>н</sub> × 8, Z<sub>о</sub> = Z<sub>н</sub> × 8, Y<sub>о</sub> = Y<sub>н</sub>';
            
            updateResults();
        }
        
        function handleTouchStart(e) {
            if (e.target.tagName === 'INPUT') return;
            
            touchStartX = e.touches[0].clientX;
            swipeInProgress = true;
        }
        
        function handleTouchMove(e) {
            if (!swipeInProgress) return;
            
            if (Math.abs(e.touches[0].clientX - touchStartX) > 10) {
                e.preventDefault();
            }
        }
        
        function handleTouchEnd(e) {
            if (!swipeInProgress) return;
            
            touchEndX = e.changedTouches[0].clientX;
            const swipeThreshold = 50;
            const swipeDistance = touchEndX - touchStartX;
            
            if (Math.abs(swipeDistance) > swipeThreshold) {
                if (swipeDistance < 0 && currentMode === 'overworld') {
                    switchMode('nether');
                } else if (swipeDistance > 0 && currentMode === 'nether') {
                    switchMode('overworld');
                }
            }
            
            swipeInProgress = false;
        }
        
        function handleKeyDown(e) {
            const activeElement = document.activeElement;
            const isInputFocused = activeElement.tagName === 'INPUT';
            
            if (e.key === 'Enter' && isInputFocused) {
                e.preventDefault();
                
                const inputs = ['input-x', 'input-y', 'input-z'];
                const currentIndex = inputs.indexOf(activeElement.id);
                
                if (currentIndex !== -1 && currentIndex < inputs.length - 1) {
                    document.getElementById(inputs[currentIndex + 1]).focus();
                } else if (currentIndex === inputs.length - 1) {
                    activeElement.blur();
                    
                    if (window.innerWidth <= 768) {
                        setTimeout(() => {
                            const target = document.querySelector('.action-buttons');
                            if (target) {
                                const y = target.getBoundingClientRect().top + window.pageYOffset - 100;
                                window.scrollTo({ top: y, behavior: 'smooth' });
                            }
                        }, 50);
                    } else {
                        document.getElementById('transfer-btn').scrollIntoView({
                            behavior: 'smooth',
                            block: 'center'
                        });
                    }
                }
            }
            
            if (e.ctrlKey && e.key === 'c' && !isInputFocused) {
                e.preventDefault();
                copyCoords();
            }
            
            if (e.key === 'Enter' && activeElement.id === 'transfer-btn') {
                e.preventDefault();
                transferCoords();
            }
        }

        function setupTabNavigation() {
            const focusableElements = [
                '#input-x', '#input-y', '#input-z', 
                '#transfer-btn', '#copy-btn',
                '#mode-overworld', '#mode-nether',
                '.formula-toggle'
            ];
            
            document.addEventListener('keydown', function(e) {
                if (e.key !== 'Tab') return;
                
                const focusable = Array.from(document.querySelectorAll(focusableElements.join(', ')));
                const firstElement = focusable[0];
                const lastElement = focusable[focusable.length - 1];
                const activeElement = document.activeElement;
                
                if (e.shiftKey) {
                    if (activeElement === firstElement) {
                        lastElement.focus();
                        e.preventDefault();
                    }
                } else {
                    if (activeElement === lastElement) {
                        firstElement.focus();
                        e.preventDefault();
                    }
                }
            });
        }
        
        function handleBodyClick(e) {
            if (e.target.tagName !== 'INPUT') {
                const inputs = document.querySelectorAll('input[type="text"]');
                inputs.forEach(input => input.blur());
            }
        }
        
        function closeMobileKeyboard() {
            if (window.innerWidth <= 768) {
                document.activeElement.blur();
                document.body.focus();
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('input-x').value = '';
            document.getElementById('input-y').value = '';
            document.getElementById('input-z').value = '';
            document.getElementById('result-display').textContent = "Введите координаты";
            
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    validateNumberInput(this);
                });
                input.addEventListener('focus', clearDemoValue);
                input.addEventListener('keydown', function(e) {
                    if (e.key === '-') {
                        e.preventDefault();
                        toggleSign(this);
                    }
                });
            });
            
            document.getElementById('mode-overworld').addEventListener('click', () => switchMode('overworld'));
            document.getElementById('mode-nether').addEventListener('click', () => switchMode('nether'));
            
            const swipeArea = document.getElementById('swipe-area');
            swipeArea.addEventListener('touchstart', handleTouchStart, { passive: false });
            swipeArea.addEventListener('touchmove', handleTouchMove, { passive: false });
            swipeArea.addEventListener('touchend', handleTouchEnd);
            
            const converter = document.getElementById('converter');
            converter.addEventListener('touchstart', handleTouchStart, { passive: false });
            converter.addEventListener('touchmove', handleTouchMove, { passive: false });
            converter.addEventListener('touchend', handleTouchEnd);
            
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('click', handleBodyClick);
            setupTabNavigation();
            
            if (window.innerWidth > 768) {
                document.getElementById('input-x').focus();
            }
            
            document.addEventListener('selectstart', function(e) {
                if (!e.target.classList.contains('allow-select') && 
                    e.target.tagName !== 'INPUT' && 
                    e.target.tagName !== 'TEXTAREA') {
                    e.preventDefault();
                    return false;
                }
            });
            
            document.querySelectorAll('.action-btn, .mode-btn').forEach(btn => {
                btn.addEventListener('click', closeMobileKeyboard);
            });
        });
    </script>
</body>
    </html>
